# IndoWater Backup Cron Configuration
# This file contains cron job definitions for automated backups
# 
# To install these cron jobs, run:
# crontab /path/to/IndoWater/scripts/backup/backup-cron.conf
#
# Or add individual lines to your existing crontab with:
# crontab -e

# Set environment variables for cron jobs
SHELL=/bin/bash
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=admin@indowater.example.com

# Project root directory (update this path as needed)
PROJECT_ROOT=/path/to/IndoWater

# Daily database backup at 2:00 AM
0 2 * * * $PROJECT_ROOT/scripts/backup/database-backup.sh >> $PROJECT_ROOT/logs/cron-backup.log 2>&1

# Daily Redis backup at 2:30 AM
30 2 * * * $PROJECT_ROOT/scripts/backup/redis-backup.sh >> $PROJECT_ROOT/logs/cron-backup.log 2>&1

# Weekly full system backup on Sundays at 3:00 AM
0 3 * * 0 $PROJECT_ROOT/scripts/backup/full-system-backup.sh >> $PROJECT_ROOT/logs/cron-backup.log 2>&1

# Daily health check at 6:00 AM
0 6 * * * $PROJECT_ROOT/scripts/disaster-recovery/health-check.sh >> $PROJECT_ROOT/logs/cron-health.log 2>&1

# Hourly log rotation and cleanup (keep logs under control)
0 * * * * find $PROJECT_ROOT/logs -name "*.log" -size +100M -exec gzip {} \; 2>/dev/null

# Weekly cleanup of old backup files (older than 30 days)
0 4 * * 1 find $PROJECT_ROOT/backups -name "*.gz" -mtime +30 -delete >> $PROJECT_ROOT/logs/cron-cleanup.log 2>&1

# Monthly cleanup of old log files (older than 90 days)
0 5 1 * * find $PROJECT_ROOT/logs -name "*.log.gz" -mtime +90 -delete >> $PROJECT_ROOT/logs/cron-cleanup.log 2>&1